machine:
  services:
    - docker

dependencies:
  override:

test:
  override:
    - mkdir -p $CIRCLE_TEST_REPORTS/minitest:
        parallel: true
    - mkdir -p openstudio-standards/test/reports:
        parallel: true
    - pwd:
        parallel: true
    - ls:
        parallel: true
    - mkdir -p $CIRCLE_TEST_REPORTS/minitest
    - docker run -e CIRCLE_NODE_TOTAL -e CIRCLE_NODE_INDEX -v $(pwd):/openstudio-standards nrel/openstudio /openstudio-standards/openstudio-standards/test/bin/docker-run.sh:
        parallel: true
        timeout: 7200
    - pwd:
        parallel: true
    - ls:
        parallel: true
    - cp openstudio-standards/test/reports/* $CIRCLE_TEST_REPORTS/minitest:
        parallel: true

general:
  artifacts:
    - "openstudio-standards/test/output/prototype_buildings_results.csv"
    - "openstudio-standards/test/output/prototype_buildings_run.log"
